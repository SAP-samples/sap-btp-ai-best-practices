---
sidebar_position: 1
title: "Access to Generative AI Models"
description: "Enable users to interact with AI systems capable of creating human-like text, images, or code from natural language prompts."
hide_title: true
# hide_table_of_contents: true
---

import TabItem from "@theme/TabItem";
import Tabs from "@theme/Tabs";

import PageViewTracker from "@site/src/components/tracking/PageViewTracker";

<PageViewTracker featureName="ACCESS_TO_GENERATIVE_AI_MODELS" />

<div
  className="hero-header"
  style={{
    backgroundImage: `url(${require("@site/static/img/generative-ai/bg-title-page.jpeg").default})`
  }}
>
  <h1>Access to Generative AI Models</h1>
</div>

<div className="section-with-background">
  <div className="row">
    <div className="col col--8">
      <h2>Steps</h2>
      <ol>
        <li>
          <a href="#1-overview">Overview</a>
        </li>
        <li>
          <a href="#2-pre-requisites">Pre-requisites</a>
        </li>
        <li>
          <a href="#3-key-choices-and-guidelines">Key Choices and Guidelines</a>
        </li>
        <li>
          <a href="#4-implementation">Implementation</a>
        </li>
      </ol>
    </div>
    <div className="col col--4">
      <ul>
        <li>
          <a href="#">Teaser Webinar</a>
        </li>
        <li>
          <a href="#">Webinar (PDF Presentation)</a>
        </li>
      </ul>
    </div>
  </div>
</div>

## <span className="step-number">1</span> Overview

### Description

Interacting with deployed Generative AI models involves sending requests to retrieve generated responses. In
the request, we can define the prompt, the model, and the parameters that control the response generation.

### Expected Outcome

Provide secure and efficient access to Generative AI models, enabling applications to leverage the power of AI
models and provide a wide spectrum of functionalities.

### Benefits

- **Model Interchangeability**: Easily switch between models with the same code and implementation to best
  suit your task.
- **Out-of-the-box Features**: Supercharge your development built-in capabilities like Data Masking, Prompt
  Templating, Filtering, and more.
- **Security & SAP Ecosystem**: It's fully integrated into the SAP Ecosystem, leveraging the best of SAP
  technologies.

## <span className="step-number">2</span> Pre-requisites

### Commercial

- SAP AI Core with the "Extended" tier on SAP BTP
  - You can find pricing details for AI Core "Extended" in the Discovery Center – AI Core.

### Technical

- SAP Business Technology Platform (SAP BTP) subaccount ([Setup Guide](#))
- SAP AI Core ([Setup Guide](#))

### High-level Reference Architecture

#### SAP Business Technology Platform (SAP BTP)

SAP Business Technology Platform (BTP) is an integrated suite of cloud services, databases, AI, and development
tools that enable businesses to build, extend, and integrate SAP and non-SAP applications efficiently.

#### SAP AI Core

SAP AI Core is a managed AI runtime that enables scalable execution of AI models and pipelines, integrating
seamlessly with SAP applications and data on SAP BTP that supports full lifecycle management of AI scenarios.

## <span className="step-number">3</span> Key Choices and Guidelines

A few case-specific decisions need to be considered that will impact the performance and utility of the app
being developed.

### Model

The choice of model is critical to the accuracy of the answer, operating costs, language, and context window.
Larger models are usually better for more complex tasks involving reasoning, longer context window, and better
inference.

#### How to choose the model?

Use the Model Library to inform your model choice using benchmarking data for Text Generation, Speech to
Text, Image Recognition, Image Generation, Embedding, and more.

Steps to access the Leaderboard view of the Model Library in your SAP BTP subaccount:

1. Go to your BTP subaccount with AI Core
2. Navigate to Instances and Subscriptions
3. Select SAP AI Launchpad
4. Select your API Connection and Resource Group
5. Go to Generative AI Hub
6. Access Model Library

**Relevant links**

- [List of available models](#)
- [AI Core Endpoint](#)

### Settings

Picking correct values for frequency penalty, presence penalty, max tokens, and temperature is crucial to the
quality of the inference. The choice depends on the needed variety, length, and control over the generated text.

#### Example Applications

1. **Frequency Penalty** (Reduces repetition of frequent words)

   - High – Summarization: Reduces redundancy in reports or articles.
   - Low – Poetry/Mantras: Encourages repetition for stylistic effect.

2. **Presence Penalty** (Discourages reuse of any previous words)

   - High – Idea Brainstorming: Promotes diverse, non-repetitive topics.
   - Low – Themed Storytelling: Reinforces a central topic or character.

3. **Max-Tokens** (Limits response length)

   - Low – Chatbot Responses: Short, to-the-point answers.
   - High – Long-Form Content: Detailed articles or stories.

4. **Temperature** (Controls randomness of output)
   - Low – Technical/Legal Writing: Precise, deterministic output.
   - High – Creative Writing: More imaginative and random text.

## <span className="step-number">4</span> Implementation

Below you can find the necessary information to develop a project in your favorite language using the official
SAP Libraries and SDKs.

### Programming Model Selection Guidelines

When developing AI applications within the SAP ecosystem, consider the following recommendations:

- **Backend-Only API**: Use Python (well-maintained) or JavaScript/TypeScript (strong async capabilities,
  Node.js ecosystem).
- **Fullstack Application (UI & Backend)**: Use CAP (Cloud Application Programming Model) for optimized
  performance, scalability, and seamless SAP integration.

While these are general best practices, the final choice should align with your team's expertise and project
requirements.

<div className="tabs-with-background">
<Tabs groupId="language">
  <TabItem value="python" label="Python" default>

<h3>Recommendation</h3>

There are multiple SDKs available for Python. We recommend using the SAP Generative AI hub SDK to harness
the power of generative AI models, and the SAP AI Core SDK along with the AI API Client SDK for managing the
AI Core lifecycle efficiently.

<h3>SDK</h3>

With this SDK you can leverage the power of generative models available in the generative AI Hub of SAP AI
Core, it provides model access by wrapping the native SDKs of the model providers (OpenAI, Amazon, Google),
through langchain or the orchestration service.

- [SAP Generative AI hub SDK](#) (Recommended for building apps)
- [SAP AI Core SDK and AI API Client SDK](#) (managing the AI Core lifecycle)

<h3>Tutorials and Learning Journeys</h3>

- [Consumption of GenAI models Using Orchestration - A Beginner's Guide](#) (SAP Generative AI hub SDK) from
  Generative AI with SAP AI Core

<h3>Reference Code</h3>

<h4>Recommended</h4>

- [SAP BTP AI Best Practices - Sample Code](#)
- [btp-gen-ai-hub-sdk-samples](#) (SAP Generative AI hub SDK. Refer to the `btp-gen-ai-hub-sdk-
samples/docs/notebook-samples/2-connect-genaihub-from-env.ipynb` file)

<h4>Other</h4>

- [ai-core-samples](#) (SAP AI Core SDK)

<h4>Relevant Code</h4>

Simple chat completion call using the SAP Generative AI hub SDK.

```python
from gen_ai_hub.proxy.langchain.init_models import init_llm
from gen_ai_hub.proxy.core.proxy_clients import get_proxy_client
from gen_ai_hub.proxy.langchain.openai import ChatOpenAI


# note: proxy_client is optional
proxy_client = get_proxy_client('gen-ai-hub')

chat = ChatOpenAI(proxy_model_name="gpt-35-turbo", proxy_client=proxy_client, temperature=0)

prompt = """Translate to danish: Guten Morgen"""
chat.invoke(prompt).content
```

  </TabItem>
  <TabItem value="javascript-typescript" label="JavaScript/TypeScript">

<h3>Recommendation</h3>

The SAP Cloud SDK for AI is the official SAP AI SDK for TypeScript.

<h3>SDK</h3>

With this SDK you can leverage the power of generative models available in the generative AI Hub of SAP AI
Core, it provides model access by wrapping the native SDKs of the model providers (OpenAI, Amazon, Google),
through langchain or the orchestration service.

- [SAP Cloud SDK for AI](#)

<h3>Tutorials and Learning Journeys</h3>

- [Consumption of GenAI models Using Orchestration - A Beginner's Guide](#) (SAP Cloud SDK) from Generative
  AI with SAP AI Core

<h3>Reference Code</h3>

- [SAP BTP AI Best Practices - Sample Code](#)
- [SAP Cloud SDK for AI - Sample Code](#) (refer to the `orchestrationChatCompletion` function located in the `ai-
sdk-js/sample-code/src/orchestration.ts` file)

<h3>Relevant Code</h3>

Simple chat completion call using the SAP Cloud SDK for AI.

```typescript
const orchestrationClient = new OrchestrationClient({
  // Define the language model to be used
  llm: {
    model_name: "gpt-4o",
    model_params: {
      max_tokens: 1000, // Maximum number of tokens to generate in the response. This limits the length of the generated text.
      temperature: 0.6, // Lower values make the output more deterministic, while higher values make it more random.
      n: 1 // Number of responses to generate.
    }
  },
  // Define the prompt
  templating: {
    template: [{ role: "user", content: "What is the capital of France?" }]
  }
});

// Execute the request
const result = await orchestrationClient.chatCompletion();

console.log(result.getContent());
```

  </TabItem>
  <TabItem value="cap-app" label="CAP App">

<h3>Recommendation</h3>

There are 2 SDKs available for developing CAP applications, we recommend using the SAP Cloud SDK for AI
because it's the official SAP AI SDK, but the CAP LLM Plugin has great code sample code to learn from.

<h3>SDKs</h3>

With this SDK you can leverage the power of generative models available in the generative AI Hub of SAP AI
Core, it provides model access by wrapping the native SDKs of the model providers (OpenAI, Amazon, Google),
through langchain or the orchestration service.

- [SAP Cloud SDK for AI](#) (Recommended)
- [CAP LLM Plugin](#)

<h3>Tutorials and Learning Journeys</h3>

- [Consumption of GenAI models Using Orchestration - A Beginner's Guide](#) (SAP Cloud SDK) from Generative
  AI with SAP AI Core

<h3>Reference Code</h3>

<h4>Recommended</h4>

- [SAP BTP AI Best Practices - Sample Code](#)
- [SAP Cloud SDK for AI - Sample CAP](#) (refer to the `OrchestrationService` class located in the `ai-sdk-js/sample-
cap/srv/orchestration/orchestration-service.ts` file)

For more details, please refer to the TypeScript section of this page because it has more examples and the SDK is
the same.

<h4>Other</h4>

These sample projects might not use the official SDK or not follow the best practices but can be good examples
for learning.

- [CAP LLM Plugin - Sample Projects](#)

<h3>Relevant Code</h3>

Simple chat completion call using the SAP Cloud SDK for AI.

```typescript
const orchestrationClient = new OrchestrationClient({
  // Define the language model to be used
  llm: {
    model_name: "gpt-4o",
    model_params: {
      max_tokens: 1000, // Maximum number of tokens to generate in the response. This limits the length of the generated text.
      temperature: 0.6, // Lower values make the output more deterministic, while higher values make it more random.
      n: 1 // Number of responses to generate.
    }
  },
  // Define the prompt
  templating: {
    template: [{ role: "user", content: "What is the capital of France?" }]
  }
});

// Execute the request
const result = await orchestrationClient.chatCompletion();

console.log(result.getContent());
```

  </TabItem>
  <TabItem value="java" label="Java">

<h3>Recommendation</h3>

There is an official SAP Java SDK for accessing foundation models through AI Core service. It is recommended to
use the SDK and follow the examples in the given repository.

<h3>SDKs</h3>

With this SDK you can leverage the power of generative models available in the generative AI Hub of SAP AI
Core, it provides model access by wrapping the native SDKs of the model providers (OpenAI, Amazon, Google),
through the APIs or the orchestration service.

- [SAP Cloud SDK for AI (for Java)](#)

<h3>Tutorials and Learning Journeys</h3>

- [Consumption of GenAI models Using Orchestration - A Beginner's Guide](#) (SAP Cloud SDK) from Generative
  AI with SAP AI Core

<h3>Reference Code</h3>

- [SAP BTP AI Best Practices - Sample Code](#)
- Sample Spring App example (Refer to service `ai-sdk-java/.../services/OpenAiService.java` and the controller
  to interact with the service `ai-sdk-java/.../controllers/OpenAiController.java`)

<h3>Relevant Code</h3>

Simple code demonstrating AI capabilities using the SAP Cloud SDK for AI.

```java
@SuppressWarnings("unused") // The end-to-end test doesn't use this method
@GetMapping("/streamChatCompletionDeltas")
@Nonnull
ResponseEntity<ResponseBodyEmitter> streamChatCompletionDeltas() {
  final var message = "Can you give me the first 100 numbers of the Fibonacci sequence?";
  final var stream = service.streamChatCompletionDeltas(message);
  final var emitter = new ResponseBodyEmitter();
  final Runnable consumeStream =
      () -> {
        final var totalOutput = new OpenAiChatCompletionOutput();
        // try-with-resources ensures the stream is closed
        try (stream) {
          stream
              .peek(totalOutput::addDelta)
              .forEach(delta -> send(emitter, delta.getDeltaContent()));
        } finally {
          send(emitter, "\n\n-----Total Output-----\n\n" + objectToJson(totalOutput));
          emitter.complete();
        }
      };
  ThreadContextExecutors.getExecutor().execute(consumeStream);

  // TEXT_EVENT_STREAM allows the browser to display the content as it is streamed
  return ResponseEntity.ok().contentType(MediaType.TEXT_EVENT_STREAM).body(emitter);
}
```

    </TabItem>

  </Tabs>
</div>

<br />

<div className="section-with-background gradient-blue">

## Related Best Practices

- [Prompt Templating](#)
- [Data Masking](#)
- [Content Filtering](#)

</div>

<br />

<div className="section-with-background gradient-blue">

## Related Functional Patterns

### Information Analysis & Processing

- Summarization of Text
- Information Classification in Categories
- Content Creation
- Generate text based on generic knowledge
- Describe Images

### Conversational Interaction

- Translation of Text
- Image Analysis
- Review and refine text
- Sentiment Analysis of Text
- Generate Image from Text
- Conversational interaction with applications
- Conversational interaction with analytics

</div>

<br />

<div className="section-with-background gradient-violet-blue">

## Contributors

- Marques, Luis
- CIGAINA, MARCO
- Rzhaksynskyi, Andrii
- Stoyanov, Velizar
- Rodriguez, Joel
- Chopra, Aman
- Bartler, Felix
- Robledo, Francisco
- Schulz, Robert
- Antonio, Dan
- Humphries, Ian
- Lange, Joerg

</div>
