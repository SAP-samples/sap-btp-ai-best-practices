<div>
  <!-- Global toolbar above the layout -->
  <ui5-bar design="Subheader" style="height: 48px">
    <div slot="startContent" style="display: flex; align-items: center; gap: 0.5rem">
      <ui5-label for="email-select">Email</ui5-label>
      <ui5-select id="email-select" style="min-width: 520px"></ui5-select>
      <ui5-button id="run-agent" design="Emphasized" icon="ai">Run Agent</ui5-button>
      <ui5-button id="reset-btn" design="Default" icon="reset">Reset</ui5-button>
    </div>
  </ui5-bar>
  <ui5-flexible-column-layout id="email-fcl" layout="ThreeColumnsEndExpanded" separators="All">
    <div slot="startColumn" id="start-col">
      <ui5-bar design="Header" style="height: 60px">
        <div slot="startContent" style="display: flex; align-items: center; gap: 0.5rem">
          <ui5-title level="H5">Folders</ui5-title>
        </div>
      </ui5-bar>
      <ui5-list id="tags-list" selection-mode="Single">
        <ui5-li data-tag="" icon="inbox" type="Active" selected>Inbox</ui5-li>
      </ui5-list>
    </div>
    <div slot="midColumn" id="mid-col">
      <ui5-bar design="Header" style="height: 60px">
        <div slot="startContent" style="display: flex; align-items: center; gap: 0.5rem">
          <ui5-title level="H5" id="emails-title">Inbox</ui5-title>
          <ui5-tag id="emails-count" design="Set2" color-scheme="10">0</ui5-tag>
        </div>
      </ui5-bar>
      <ui5-list id="emails-list" selection-mode="Single"></ui5-list>
    </div>
    <div slot="endColumn" id="end-col">
      <div>
        <ui5-illustrated-message id="preview-empty" name="NoData">
          <ui5-title slot="title" level="H1">No email selected</ui5-title>
          <div slot="subtitle">Select an email to preview</div>
        </ui5-illustrated-message>

        <div id="preview-container" style="display: none">
          <div style="display: flex; align-items: center; gap: 0.5rem; padding: 1rem 1rem 0; flex-wrap: wrap">
            <ui5-title level="H4" id="email-subject"></ui5-title>
            <ui5-tag id="email-status-title" style="display: none"></ui5-tag>
          </div>

          <ui5-bar id="email-meta-bar" design="Header" style="display: none"></ui5-bar>

          <div style="padding: 0.5rem 1rem 1rem 1rem">
            <div id="email-tags" style="margin-bottom: 0.5rem"></div>
            <!-- Original Email -->
            <ui5-card id="original-container" style="margin-bottom: 1.5rem">
              <!-- <ui5-card-header slot="header" title-text="Original Email"></ui5-card-header> -->
              <div style="padding: 1rem">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem">
                  <ui5-text id="email-from"></ui5-text>
                  <ui5-text id="email-date"></ui5-text>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem">
                  <ui5-label>File:</ui5-label>
                  <ui5-text id="email-filename"></ui5-text>
                </div>
                <div id="email-attachments" style="margin-bottom: 0.5rem; padding-bottom: 0.5rem; box-shadow: var(--sapContent_HeaderShadow)"></div>
                <iframe
                  id="email-html"
                  title="Original Email HTML"
                  sandbox="allow-same-origin"
                  style="width: 100%; height: 360px; border: 1px solid var(--sapGroup_BorderColor); border-radius: 8px; background: #fff"
                ></iframe>
                <ui5-text id="email-text" style="display: none"></ui5-text>
              </div>
            </ui5-card>
            <div id="agent-result" class="result-panel"></div>
          </div>
        </div>
      </div>
    </div>
  </ui5-flexible-column-layout>
  <ui5-toast id="action-toast" duration="3000"></ui5-toast>
  <ui5-busy-indicator
    id="global-busy"
    style="position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(255, 255, 255, 0.6); z-index: 1000"
    text="Processing..."
    active
  >
  </ui5-busy-indicator>
</div>
