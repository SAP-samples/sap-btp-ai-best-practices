<div class="orders-container">
    <ui5-card>
        <ui5-card-header title-text="Search Sales Order"></ui5-card-header>
        <div style="padding: 1rem;" class="search-section">
            <ui5-button id="random-btn" design="Emphasized" icon="create">Generate Sales Order</ui5-button>
            <div style="flex: 1;">
                <ui5-label for="doc-num-input" show-colon>Sales Document</ui5-label>
                <ui5-input id="doc-num-input" placeholder="Enter Document Number"></ui5-input>
            </div>
            <div style="flex: 1;">
                <ui5-label for="doc-item-input" show-colon>Item Number</ui5-label>
                <ui5-input id="doc-item-input" placeholder="Enter Item Number (e.g. 10)"></ui5-input>
            </div>
            <ui5-button id="search-btn" design="Emphasized" icon="search">Search</ui5-button>
        </div>
    </ui5-card>

    <div id="order-content" style="display: none;">
        <div id="status-banner" class="status-banner"></div>

        <div class="order-details-grid">
            <!-- Left: Details & SHAP -->
            <div style="display: flex; flex-direction: column; gap: 1rem;">
                <ui5-card>
                    <ui5-card-header title-text="Order Information"></ui5-card-header>
                    <div style="padding: 1rem;" class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Sold To Number</span>
                            <span class="info-value" id="val-sold-to">-</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Ship To Party</span>
                            <span class="info-value" id="val-ship-to">-</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Material Number</span>
                            <span class="info-value" id="val-material-number">-</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Material Description</span>
                            <span class="info-value" id="val-material-description">-</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Quantity</span>
                            <span class="info-value" id="val-qty">-</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Value</span>
                            <span class="info-value" id="val-value">-</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Anomaly Probability</span>
                            <span class="info-value" id="val-score">-</span>
                        </div>
                    </div>
                </ui5-card>

                <ui5-card>
                    <ui5-card-header title-text="Key Contributing Features"></ui5-card-header>
                    <ui5-table id="shap-table">
                        <ui5-table-header-row slot="headerRow">
                            <ui5-table-header-cell>Feature</ui5-table-header-cell>
                            <ui5-table-header-cell>Value</ui5-table-header-cell>
                            <ui5-table-header-cell>Contribution</ui5-table-header-cell>
                        </ui5-table-header-row>
                    </ui5-table>
                </ui5-card>
            </div>

            <!-- Right: AI Actions -->
            <div class="ai-section">
                <!-- Quick Classification first for faster checks -->
                <ui5-card>
                    <ui5-card-header title-text="Quick Classification"></ui5-card-header>
                    <div style="padding: 1rem; display: flex; flex-direction: column; gap: 1rem;">
                        <ui5-button id="classify-btn" icon="activate">Run Secondary Check (via GenAI)</ui5-button>
                        <ui5-busy-indicator id="classify-busy" active size="Medium" style="display: none;"></ui5-busy-indicator>
                        <div id="binary-result" class="ai-result-box" style="display: none;"></div>
                    </div>
                </ui5-card>

                <ui5-card>
                    <ui5-card-header title-text="AI Analysis"></ui5-card-header>
                    <div style="padding: 1rem; display: flex; flex-direction: column; gap: 1rem;">
                        <ui5-button id="explain-btn" design="Attention" icon="lightbulb">Generate AI Explanation</ui5-button>
                        <ui5-busy-indicator id="ai-busy" active size="Medium" style="display: none;"></ui5-busy-indicator>
                        <div id="ai-result" class="ai-result-box" style="display: none;"></div>
                    </div>
                </ui5-card>
            </div>
        </div>
    </div>
</div>

