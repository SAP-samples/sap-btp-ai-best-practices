applications:
- name: anomaly-dashboard
  memory: 1G  # Increased for ML models and data processing
  disk_quota: 2G  # Keep disk quota for heavy ML dependencies
  path: .
  instances: 1
  stack: cflinuxfs4
  buildpacks:
    - python_buildpack
  command: >
    streamlit run __main__.py 
    --server.port=$PORT 
    --server.address=0.0.0.0 
    --server.enableCORS=false 
    --server.enableXsrfProtection=false
    --theme.base "Light" 
    --theme.primaryColor "#0070F2" 
    --theme.backgroundColor "#F5F6F7" 
    --theme.secondaryBackgroundColor "#EAECEE" 
    --theme.textColor "#1A2733" 
    --theme.font "sans serif"
  timeout: 300  # 5 minutes timeout for startup
  health-check-type: port
  health-check-timeout: 300
  default-route: true
  routes:
  - route: anomaly-dashboard.cfapps.eu10-004.hana.ondemand.com
  env:
    PYTHONPATH: .  # Ensure local packages like 'app' are importable
    PYTHONUNBUFFERED: 1  # Ensure Python output is not buffered
    STREAMLIT_SERVER_HEADLESS: true
    STREAMLIT_BROWSER_GATHER_USAGE_STATS: false