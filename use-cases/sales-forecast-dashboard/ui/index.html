<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/images/SAP_logo_square.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>StoreSense AI</title>
    <link rel="stylesheet" href="/src/style.css" />

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />

    <style>
      /* Hide entire app until JavaScript loads and UI5 components are ready */
      #app {
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
      }

      /* Show app when ready */
      #app.ready {
        opacity: 1;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <ui5-navigation-layout id="nl1">
        <ui5-shellbar slot="header" notifications-count="3" show-notifications>
          <ui5-button icon="menu2" slot="startButton" id="startButton"></ui5-button>
          <ui5-shellbar-branding slot="branding">
            StoreSense AI
            <img slot="logo" src="/images/SAP_logo.svg" />
          </ui5-shellbar-branding>

          <ui5-shellbar-item icon="sys-help" text="Help"></ui5-shellbar-item>
          <ui5-toggle-button icon="sap-icon://da" tooltip="Joule" slot="assistant"></ui5-toggle-button>
          <ui5-avatar slot="profile">
            <img src="/images/avatars/man_avatar_3.png" />
          </ui5-avatar>
        </ui5-shellbar>

        <ui5-side-navigation id="sn1" slot="sideContent">
          <ui5-side-navigation-item text="DMA Store Analysis" href="/dashboard" icon="map" selected></ui5-side-navigation-item>
          <ui5-side-navigation-item text="Scenario Maker" href="/scenario-maker" icon="simulate"></ui5-side-navigation-item>
          <ui5-side-navigation-item text="AI Chatbot" href="/chatbot" icon="da"></ui5-side-navigation-item>
        </ui5-side-navigation>

        <div class="content">
          <!-- Page content will be loaded dynamically here -->
        </div>
      </ui5-navigation-layout>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

    <!-- Plotly JS -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
