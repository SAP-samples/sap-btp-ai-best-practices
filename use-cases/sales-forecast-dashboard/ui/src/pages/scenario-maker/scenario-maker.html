<div class="scenario-maker-container">
  <!-- Header Section -->
  <div class="scenario-header">
    <div class="scenario-title-section">
      <ui5-input id="scenario-name-input" placeholder="Scenario Name" value="New Scenario"></ui5-input>
      <ui5-segmented-button id="channel-selector">
        <ui5-segmented-button-item pressed>B&M</ui5-segmented-button-item>
        <ui5-segmented-button-item>WEB</ui5-segmented-button-item>
      </ui5-segmented-button>
    </div>
    <div class="scenario-actions">
      <ui5-button id="reset-btn" icon="reset" design="Transparent">Reset</ui5-button>
      <ui5-button id="load-scenario-btn" icon="upload" design="Transparent">Load Scenario</ui5-button>
      <input type="file" id="scenario-file-input" accept=".json" style="display: none;">
      <ui5-button id="preview-json-btn" icon="syntax" design="Transparent">Preview JSON</ui5-button>
      <ui5-button id="save-scenario-btn" icon="save" design="Transparent">Save</ui5-button>
      <ui5-button id="submit-scenario-btn" icon="simulate" design="Emphasized">Run Scenario</ui5-button>
    </div>
  </div>

  <!-- Validation Messages -->
  <div id="validation-messages" class="validation-messages hidden"></div>

  <!-- Main Content Grid -->
  <div class="scenario-content">
    <!-- Left Column: Configuration -->
    <div class="config-column">

      <!-- Time Window Panel -->
      <ui5-panel id="time-panel" header-text="Time Window">
        <div class="panel-content">
          <div class="form-row">
            <ui5-label for="origin-date" required>Origin Date</ui5-label>
            <ui5-date-picker id="origin-date" format-pattern="yyyy-MM-dd"></ui5-date-picker>
          </div>
          <div class="form-row">
            <ui5-label>Forecast Horizon</ui5-label>
            <div class="horizon-inputs">
              <ui5-input id="horizon-start" type="Number" value="1" placeholder="Start Week"></ui5-input>
              <ui5-text>to</ui5-text>
              <ui5-input id="horizon-end" type="Number" value="13" placeholder="End Week"></ui5-input>
            </div>
          </div>
          <div class="horizon-display">
            <ui5-text id="horizon-summary">Week 1 to Week 13</ui5-text>
          </div>
        </div>
      </ui5-panel>

      <!-- Scope Selection Panel -->
      <ui5-panel id="scope-panel" header-text="Scope Selection">
        <div class="panel-content">
          <div class="form-row">
            <ui5-label>Profit Centers (Stores)</ui5-label>
            <div class="select-all-row">
              <ui5-checkbox id="select-all-stores" text="Select All"></ui5-checkbox>
            </div>
            <ui5-input id="profit-centers-search" placeholder="Search stores..." show-clear-icon></ui5-input>
            <div id="profit-centers-list" class="checkbox-list">
              <!-- Items populated dynamically -->
            </div>
            <div id="profit-centers-selected" class="selected-count">0 selected</div>
          </div>
          <div class="form-row">
            <ui5-label>DMAs (Market Areas)</ui5-label>
            <div class="select-all-row">
              <ui5-checkbox id="select-all-dmas" text="Select All"></ui5-checkbox>
            </div>
            <ui5-input id="dmas-search" placeholder="Search DMAs..." show-clear-icon></ui5-input>
            <div id="dmas-list" class="checkbox-list">
              <!-- Items populated dynamically -->
            </div>
            <div id="dmas-selected" class="selected-count">0 selected</div>
          </div>
        </div>
      </ui5-panel>

      <!-- Global Modification Mode -->
      <ui5-panel id="global-mode-panel" header-text="Global Modification Mode">
        <div class="panel-content">
          <ui5-select id="global-operation">
            <ui5-option value="set" selected>Set to value (absolute)</ui5-option>
            <ui5-option value="increase">Increase by %</ui5-option>
            <ui5-option value="decrease">Decrease by %</ui5-option>
          </ui5-select>
          <ui5-button id="apply-global-mode" design="Transparent" style="margin-top: 0.5rem">Apply to All Levers</ui5-button>
        </div>
      </ui5-panel>

    </div>

    <!-- Right Column: Lever Controls -->
    <div class="levers-column">

      <!-- Financing Panel -->
      <ui5-panel id="financing-panel" header-text="Financing Levers" class="lever-panel">
        <div class="panel-content" id="financing-levers">
        </div>
      </ui5-panel>

      <!-- Staffing Panel (B&M only) -->
      <ui5-panel id="staffing-panel" header-text="Staffing Levers (B&M Only)" class="lever-panel">
        <div class="panel-content" id="staffing-levers">
        </div>
      </ui5-panel>

      <!-- Product Mix Panel -->
      <ui5-panel id="product-mix-panel" header-text="Product Mix Levers" class="lever-panel">
        <div class="panel-content" id="product-mix-levers">
        </div>
      </ui5-panel>

      <!-- Market Signals Panel -->
      <ui5-panel id="market-signals-panel" header-text="Market Signals Levers" class="lever-panel">
        <div class="panel-content" id="market-signals-levers">
        </div>
      </ui5-panel>

    </div>
  </div>

  <!-- JSON Preview Dialog -->
  <ui5-dialog id="json-preview-dialog" header-text="Scenario JSON Preview">
    <pre id="json-preview-content" class="json-preview"></pre>
    <div slot="footer" class="dialog-footer">
      <ui5-button id="copy-json-btn" icon="copy" design="Emphasized">Copy to Clipboard</ui5-button>
      <ui5-button id="close-preview-btn" design="Transparent">Close</ui5-button>
    </div>
  </ui5-dialog>

  <!-- Weekly Values Dialog -->
  <ui5-dialog id="weekly-values-dialog">
    <div class="weekly-dialog-content">
      <div class="baseline-info">
        <ui5-label>Current Baseline:</ui5-label>
        <ui5-text id="dialog-baseline-value"></ui5-text>
      </div>

      <div class="single-value-row">
        <ui5-checkbox id="use-single-value" text="Use same value for all weeks"></ui5-checkbox>
        <ui5-input id="single-value-input" type="Number"></ui5-input>
        <ui5-text id="single-value-unit"></ui5-text>
      </div>

      <div id="weekly-values-container" class="weekly-values-container">
        <!-- Dynamically populated -->
      </div>

      <div class="quick-actions">
        <ui5-button id="fill-all-btn" design="Transparent">Fill All</ui5-button>
        <ui5-button id="copy-week1-btn" design="Transparent">Copy Week 1</ui5-button>
        <ui5-button id="reset-weekly-btn" design="Transparent">Reset</ui5-button>
      </div>
    </div>

    <ui5-bar slot="footer">
      <ui5-button id="dialog-cancel-btn" slot="endContent" design="Transparent">Cancel</ui5-button>
      <ui5-button id="dialog-apply-btn" slot="endContent" design="Emphasized">Apply</ui5-button>
    </ui5-bar>
  </ui5-dialog>

  <!-- Toast for notifications -->
  <ui5-toast id="notification-toast"></ui5-toast>
</div>
