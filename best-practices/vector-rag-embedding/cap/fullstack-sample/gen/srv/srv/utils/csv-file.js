import { parse } from "csv-parse";
import { Readable } from "stream";
export function parseFile(fileContent) {
    const results = [];
    return new Promise((resolve, reject) => {
        Readable.from(fileContent)
            .pipe(parse({
            delimiter: ",",
            columns: true, // If the CSV has a header row
            relax_quotes: true,
        }))
            .on("data", (data) => results.push(data))
            .on("end", () => {
            //fs.unlinkSync(filePath); // Delete the file after processing
            resolve(results);
        })
            .on("error", (error) => {
            reject(error);
        });
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3N2LWZpbGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcnYvdXRpbHMvY3N2LWZpbGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUNsQyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBR2xDLE1BQU0sVUFBVSxTQUFTLENBQUMsV0FBNEI7SUFDcEQsTUFBTSxPQUFPLEdBQVUsRUFBRSxDQUFDO0lBRTFCLE9BQU8sSUFBSSxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUU7UUFDckMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUM7YUFDdkIsSUFBSSxDQUNILEtBQUssQ0FBQztZQUNKLFNBQVMsRUFBRSxHQUFHO1lBQ2QsT0FBTyxFQUFFLElBQUksRUFBRSw4QkFBOEI7WUFDN0MsWUFBWSxFQUFFLElBQUk7U0FDbkIsQ0FBQyxDQUNIO2FBQ0EsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUN4QyxFQUFFLENBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRTtZQUNkLDhEQUE4RDtZQUM5RCxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDbkIsQ0FBQyxDQUFDO2FBQ0QsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQ3JCLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNoQixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlIH0gZnJvbSBcImNzdi1wYXJzZVwiO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tIFwic3RyZWFtXCI7XG5pbXBvcnQgeyBJbmNvbWluZ01lc3NhZ2UgfSBmcm9tIFwiaHR0cFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VGaWxlKGZpbGVDb250ZW50OiBJbmNvbWluZ01lc3NhZ2UpOiBQcm9taXNlPGFueVtdPiB7XG4gIGNvbnN0IHJlc3VsdHM6IGFueVtdID0gW107XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBSZWFkYWJsZS5mcm9tKGZpbGVDb250ZW50KVxuICAgICAgLnBpcGUoXG4gICAgICAgIHBhcnNlKHtcbiAgICAgICAgICBkZWxpbWl0ZXI6IFwiLFwiLFxuICAgICAgICAgIGNvbHVtbnM6IHRydWUsIC8vIElmIHRoZSBDU1YgaGFzIGEgaGVhZGVyIHJvd1xuICAgICAgICAgIHJlbGF4X3F1b3RlczogdHJ1ZSxcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIC5vbihcImRhdGFcIiwgKGRhdGEpID0+IHJlc3VsdHMucHVzaChkYXRhKSlcbiAgICAgIC5vbihcImVuZFwiLCAoKSA9PiB7XG4gICAgICAgIC8vZnMudW5saW5rU3luYyhmaWxlUGF0aCk7IC8vIERlbGV0ZSB0aGUgZmlsZSBhZnRlciBwcm9jZXNzaW5nXG4gICAgICAgIHJlc29sdmUocmVzdWx0cyk7XG4gICAgICB9KVxuICAgICAgLm9uKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9KTtcbiAgfSk7XG59XG4iXX0=